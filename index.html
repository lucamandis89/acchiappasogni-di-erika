<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Acchiappasogni di Erika</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#7c5cff">

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">‚ú®</div>
      <div>
        <div id="brandName" class="brand-title">Acchiappasogni di Erika</div>
        <div class="brand-sub">Catalogo ‚Ä¢ Ordina su WhatsApp</div>
      </div>
    </div>

    <div class="actions">
      <button id="btnDesigner" class="btn primary" style="font-weight:900;">
        üé® CREA IL TUO ACCHIAPPASOGNI
      </button>

      <button id="btnCustom" class="btn ghost">Personalizzato</button>
      <button id="btnAdmin" class="btn ghost">‚öôÔ∏è Impostazioni</button>

      <button id="btnCart" class="btn">
        Carrello <span id="cartCount" class="badge">0</span>
      </button>
    </div>
  </header>

  <main class="container">
    <section class="search">
      <input id="search" type="search" placeholder="Cerca (nome o descrizione)..." autocomplete="off" />
    </section>

    <section class="tabs-wrap">
      <div id="tabs" class="tabs"></div>
    </section>

    <section id="grid" class="grid" aria-live="polite"></section>
  </main>

  <!-- CARRELLO -->
  <div id="drawerBackdrop" class="backdrop hidden"></div>
  <aside id="drawer" class="drawer hidden" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">Carrello</div>
      <button id="btnCloseCart" class="btn ghost">Chiudi</button>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="totals">
      <div class="row"><span>Subtotale</span><span id="subtotal">‚Ç¨ 0,00</span></div>
      <div class="row"><span>Spedizione</span><span id="shipping">‚Ç¨ 0,00</span></div>
      <div class="row total"><span>Totale</span><span id="total">‚Ç¨ 0,00</span></div>
      <div class="hint" id="shippingHint"></div>
    </div>

    <div class="checkout">
      <div class="section-title">Dati ordine</div>

      <label class="field">
        <span>Nome e cognome</span>
        <input id="name" type="text" placeholder="Es. Mario Rossi" />
      </label>

      <div class="radios">
        <label><input type="radio" name="delivery" value="shipping" checked /> Spedizione</label>
        <label><input type="radio" name="delivery" value="pickup" /> Ritiro / consegna a mano</label>
      </div>

      <div id="shippingFields">
        <label class="field">
          <span>Via / indirizzo</span>
          <input id="street" type="text" placeholder="Via..." />
        </label>

        <div class="two">
          <label class="field">
            <span>CAP</span>
            <input id="cap" type="text" inputmode="numeric" placeholder="090..." />
          </label>

          <label class="field">
            <span>Citt√†</span>
            <input id="city" type="text" placeholder="Citt√†..." />
          </label>
        </div>
      </div>

      <label class="field">
        <span>Note (colore, personalizzazione, ecc.)</span>
        <textarea id="notes" rows="3" placeholder="Scrivi qui..."></textarea>
      </label>

      <button id="btnSend" class="btn primary">Invia ordine su WhatsApp</button>
      <button id="btnClear" class="btn danger">Annulla ordine (svuota carrello)</button>

      <p class="small">
        Pagamento e spedizione vengono gestiti fuori dal sito. Riceverai conferma su WhatsApp.
      </p>
    </div>
  </aside>

  <!-- DESIGNER -->
  <div id="designerBackdrop" class="backdrop hidden"></div>
  <aside id="designerModal" class="drawer hidden" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">Crea il tuo Acchiappasogni</div>
      <button id="btnCloseDesigner" class="btn ghost">Chiudi</button>
    </div>

    <div style="padding:12px;">
      <div class="section-title">Evento / Bomboniera</div>
      <div style="display:grid; gap:10px; margin-top:8px;">
        <label class="field" style="margin:0;">
          <span>Tipo evento</span>
          <select id="eventType">
            <option value="">Seleziona...</option>
            <option value="Battesimo">Battesimo</option>
            <option value="Comunione">Comunione</option>
            <option value="Cresima">Cresima</option>
            <option value="Matrimonio">Matrimonio</option>
            <option value="Laurea">Laurea</option>
            <option value="Nascita">Nascita</option>
            <option value="Compleanno">Compleanno</option>
            <option value="Altro">Altro</option>
          </select>
        </label>

        <div class="two">
          <label class="field" style="margin:0;">
            <span>Quantit√† bomboniere</span>
            <input id="eventQty" type="number" min="1" max="300" placeholder="Es. 30">
          </label>
          <label class="field" style="margin:0;">
            <span>Data evento</span>
            <input id="eventDate" type="date">
          </label>
        </div>

        <label class="field" style="margin:0;">
          <span>Tema (facoltativo)</span>
          <input id="eventTheme" type="text" placeholder="Es. Rosa e oro, mare, angeli...">
        </label>
      </div>

      <div class="section-title" style="margin-top:14px;">Idee gi√† composte (modificabili)</div>
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin:10px 0;">
        <button id="presetBase" class="btn small">Classico</button>
        <button id="presetPhoto" class="btn small">Stile Foto (AA)</button>
        <button id="presetMarriage" class="btn small">Matrimonio</button>
        <button id="presetBaptism" class="btn small">Battesimo</button>
        <button id="presetCresima" class="btn small">Cresima</button>
        <button id="presetLaurea" class="btn small">Laurea</button>
        <button id="presetBaby" class="btn small">Nascita</button>
        <button id="presetFantasy" class="btn small">Fantasy</button>
      </div>

      <div class="section-title">Strumenti (tocca l‚Äôanteprima per aggiungere)</div>
      <div style="display:flex; gap:8px; flex-wrap:wrap; margin:8px 0;">
        <button id="toolBead" class="btn small">üî¥ Perlina</button>
        <button id="toolGlitter" class="btn small">‚ú® Brillantino</button>

        <button id="toolHeart" class="btn small">‚ù§Ô∏è Cuore</button>
        <button id="toolRings" class="btn small">üíç Fedi</button>
        <button id="toolBouquet" class="btn small">üíê Bouquet</button>
        <button id="toolRose" class="btn small">üåπ Rosa</button>
        <button id="toolCrown" class="btn small">üëë Corona</button>

        <button id="toolAngel" class="btn small">üëº Angelo</button>
        <button id="toolDove" class="btn small">üïäÔ∏è Colomba</button>
        <button id="toolBaby" class="btn small">üë∂ Beb√®</button>
        <button id="toolRibbon" class="btn small">üéÄ Fiocco</button>
        <button id="toolCross" class="btn small">‚úùÔ∏è Croce</button>

        <button id="toolMoon" class="btn small">üåô Luna</button>
        <button id="toolStar" class="btn small">‚≠ê Stella</button>
        <button id="toolButterfly" class="btn small">ü¶ã Farfalla</button>
        <button id="toolFlower" class="btn small">üå∏ Fiore</button>
        <button id="toolSparkle" class="btn small">‚ú® Magia</button>

        <button id="toolLetter" class="btn small">üî§ Lettera</button>
        <button id="toolNumber" class="btn small">üî¢ Numero</button>
        <button id="toolPhoto" class="btn small">üì∑ Foto</button>

        <button id="toolUndo" class="btn danger small">Annulla</button>
        <button id="toolClearAll" class="btn danger small">Pulisci</button>
      </div>

      <div class="section-title">Anteprima</div>
      <div style="border:1px solid rgba(0,0,0,.12); border-radius:16px; overflow:hidden; margin-top:8px;">
        <canvas id="designerCanvas" style="width:100%; height:360px; display:block; background:#fff;"></canvas>
      </div>

      <div class="section-title" style="margin-top:12px;">Prezzo extra configurazione</div>
      <div style="padding:10px; border-radius:14px; background:rgba(0,0,0,.05); font-weight:900;">
        Totale extra: <span id="dreamPrice">‚Ç¨ 0,00</span>
      </div>

      <div class="section-title" style="margin-top:12px;">Componenti e variabili</div>
      <div style="display:grid; gap:10px; margin-top:8px;">
        <label class="field" style="margin:0;">
          <span>Diametro (cm)</span>
          <input id="optDiameter" type="range" min="12" max="60" value="35">
        </label>

        <label class="field" style="margin:0;">
          <span>Numero piume</span>
          <input id="optFeathers" type="range" min="1" max="9" value="3">
        </label>

        <label class="field" style="margin:0;">
          <span>Lunghezza piume</span>
          <input id="optFeatherLen" type="range" min="40" max="140" value="95">
        </label>

        <label class="field" style="margin:0;">
          <span>Spessore cerchi</span>
          <input id="optRingWidth" type="range" min="2" max="10" value="5">
        </label>

        <label class="field" style="margin:0;">
          <span>Numero cerchi (1‚Äì10)</span>
          <input id="optRingCount" type="range" min="1" max="10" value="2">
        </label>

        <label class="field" style="margin:0;">
          <span>Spaziatura cerchi</span>
          <input id="optRingGap" type="range" min="4" max="40" value="18">
        </label>

        <label class="field" style="margin:0;">
          <span>Rete: densit√†</span>
          <input id="optWebDensity" type="range" min="8" max="28" value="14">
        </label>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <label class="field" style="margin:0; min-width:150px;">
            <span>Colore cerchi</span>
            <input id="colRings" type="color" value="#222222">
          </label>

          <!-- ‚úÖ NUOVO: scelta colori cerchi -->
          <label style="display:flex; gap:8px; align-items:center; margin-top:6px;">
            <input id="optMultiRingColors" type="checkbox">
            <span>Colori diversi per ogni cerchio</span>
          </label>

          <div id="ringColorsWrap" style="display:none; padding:10px; border-radius:14px; background:rgba(0,0,0,.05); width:100%;">
            <div style="font-weight:900; margin-bottom:6px;">Colori cerchi (dal pi√π grande al pi√π piccolo)</div>
            <div id="ringColorsList" style="display:flex; gap:10px; flex-wrap:wrap;"></div>
          </div>

          <label class="field" style="margin:0; min-width:150px;">
            <span>Colore rete</span>
            <input id="colWeb" type="color" value="#222222">
          </label>
          <label class="field" style="margin:0; min-width:150px;">
            <span>Colore piume</span>
            <input id="colFeathers" type="color" value="#333333">
          </label>
          <label class="field" style="margin:0; min-width:150px;">
            <span>Colore perline</span>
            <input id="colBeads" type="color" value="#b50000">
          </label>
        </div>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <label style="display:flex; gap:8px; align-items:center;">
            <input id="optBeadsOn" type="checkbox" checked>
            <span>Perline</span>
          </label>

          <label class="field" style="margin:0; min-width:180px;">
            <span>Quantit√† perline</span>
            <input id="optBeadsQty" type="range" min="0" max="30" value="10">
          </label>

          <label style="display:flex; gap:8px; align-items:center;">
            <input id="optGlitter" type="checkbox">
            <span>Brillantini</span>
          </label>
        </div>

        <label class="field" style="margin:0;">
          <span>Scritta sopra (opzionale)</span>
          <input id="optTextTop" type="text" placeholder="Es. REAL HASTA LA MUERTE">
        </label>

        <label class="field" style="margin:0;">
          <span>Colore scritta</span>
          <input id="colText" type="color" value="#b50000">
        </label>

        <label class="field" style="margin:0;">
          <span>Simbolo centrale</span>
          <select id="optSymbol">
            <option value="none">Nessuno</option>
            <option value="AA">AA</option>
            <option value="heart">Cuore</option>
            <option value="moon">Luna</option>
            <option value="star">Stella</option>
            <option value="cross">Croce</option>
          </select>
        </label>

        <div style="display:flex; gap:10px; flex-wrap:wrap;">
          <label style="display:flex; gap:8px; align-items:center;">
            <input id="optCharms" type="checkbox" checked>
            <span>Charms laterali</span>
          </label>

          <label class="field" style="margin:0; min-width:180px;">
            <span>Grandezza charms</span>
            <input id="optCharmSize" type="range" min="18" max="60" value="34">
          </label>
        </div>

        <label class="field" style="margin:0;">
          <span>Nome (facoltativo)</span>
          <input id="designerName" type="text" placeholder="Es. Maria">
        </label>

        <label class="field" style="margin:0;">
          <span>Note (facoltative)</span>
          <textarea id="designerNotes" rows="3" placeholder="Colore preferito, dettagli..."></textarea>
        </label>

        <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:4px;">
          <button id="btnSaveDream" class="btn small" style="flex:1;">Salva progetto</button>
          <button id="btnMyDreams" class="btn small" style="flex:1;">I miei progetti</button>
        </div>

        <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:4px;">
          <button id="btnSendDesign" class="btn primary" style="flex:1;">Invia progetto su WhatsApp</button>
          <button id="btnDownloadDesign" class="btn small" style="flex:1;">Scarica immagine</button>
        </div>

        <p class="small" id="designerHint" style="margin-top:6px;"></p>
      </div>
    </div>
  </aside>

  <!-- I MIEI PROGETTI -->
  <div id="myDreamsBackdrop" class="backdrop hidden"></div>
  <aside id="myDreamsModal" class="drawer hidden" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">I miei progetti salvati</div>
      <button id="btnCloseMyDreams" class="btn ghost">Chiudi</button>
    </div>
    <div style="padding:12px;">
      <div id="myDreamsList"></div>
    </div>
  </aside>

  <script src="app.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./service-worker.js");
    }
  </script>
</body>
</html>
