<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Acchiappasogni di Erika</title>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#7c5cff">

  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">✨</div>
      <div>
        <div id="brandName" class="brand-title">Acchiappasogni di Erika</div>
        <div class="brand-sub">Catalogo • Ordina su WhatsApp</div>
      </div>
    </div>

    <div class="actions">
      <button id="btnCustom" class="btn ghost">Personalizzato</button>
      <button id="btnSettings" class="btn ghost">Impostazioni</button>
      <button id="btnCart" class="btn">Carrello <span id="cartCount" class="badge">0</span></button>
    </div>
  </header>

  <main class="container">
    <section class="search">
      <input id="search" type="search" placeholder="Cerca (nome o descrizione)..." autocomplete="off" />
    </section>

    <section class="tabs-wrap">
      <div id="tabs" class="tabs"></div>
    </section>

    <section id="grid" class="grid" aria-live="polite"></section>
  </main>

  <div id="drawerBackdrop" class="backdrop hidden"></div>

  <aside id="drawer" class="drawer hidden" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">Carrello</div>
      <button id="btnCloseCart" class="btn ghost">Chiudi</button>
    </div>

    <div id="cartItems" class="cart-items"></div>

    <div class="totals">
      <div class="row"><span>Subtotale</span><span id="subtotal">€ 0,00</span></div>
      <div class="row"><span>Spedizione</span><span id="shipping">€ 0,00</span></div>
      <div class="row total"><span>Totale</span><span id="total">€ 0,00</span></div>
      <div class="hint" id="shippingHint"></div>
    </div>

    <div class="checkout">
      <div class="section-title">Dati ordine</div>

      <label class="field">
        <span>Nome e cognome</span>
        <input id="name" type="text" placeholder="Es. Mario Rossi" />
      </label>

      <div class="radios">
        <label><input type="radio" name="delivery" value="shipping" checked /> Spedizione</label>
        <label><input type="radio" name="delivery" value="pickup" /> Ritiro / consegna a mano</label>
      </div>

      <div id="shippingFields">
        <label class="field">
          <span>Via / indirizzo</span>
          <input id="street" type="text" placeholder="Via..." />
        </label>

        <div class="two">
          <label class="field">
            <span>CAP</span>
            <input id="cap" type="text" inputmode="numeric" placeholder="090..." />
          </label>

          <label class="field">
            <span>Città</span>
            <input id="city" type="text" placeholder="Città..." />
          </label>
        </div>
      </div>

      <label class="field">
        <span>Note (colore, personalizzazione, ecc.)</span>
        <textarea id="notes" rows="3" placeholder="Scrivi qui..."></textarea>
      </label>

      <button id="btnSend" class="btn primary">Invia ordine su WhatsApp</button>
      <button id="btnClear" class="btn danger">Annulla ordine (svuota carrello)</button>

      <p class="small">
        Pagamento e spedizione vengono gestiti fuori dal sito. Riceverai conferma su WhatsApp.
      </p>
    </div>
  </aside>

  <!-- IMPOSTAZIONI -->
  <div id="settingsBackdrop" class="backdrop hidden"></div>

  <aside id="settingsModal" class="drawer hidden" aria-hidden="true">
    <div class="drawer-header">
      <div class="drawer-title">Impostazioni (Admin)</div>
      <button id="btnCloseSettings" class="btn ghost">Chiudi</button>
    </div>

    <div style="padding:12px;">
      <div id="settingsLocked">
        <div class="section-title">Accesso</div>
        <label class="field">
          <span>Password</span>
          <input id="adminPass" type="password" placeholder="Inserisci password..." />
        </label>
        <button id="btnUnlock" class="btn primary">Entra</button>
        <p class="small" style="margin-top:8px;">Accesso richiesto per modificare prodotti e prezzi.</p>
      </div>

      <div id="settingsPanel" class="hidden">
        <hr style="margin:14px 0; opacity:.2;" />
        <div class="section-title">Sicurezza</div>

        <label class="field">
          <span>Nuova password</span>
          <input id="newAdminPass" type="password" placeholder="Scrivi nuova password..." />
        </label>

        <label class="field">
          <span>Conferma password</span>
          <input id="newAdminPass2" type="password" placeholder="Ripeti nuova password..." />
        </label>

        <button id="btnChangePass" class="btn primary">Cambia password</button>

        <hr style="margin:14px 0; opacity:.2;" />
        <div class="section-title">Ordinamento prodotti</div>

        <label class="field">
          <span>Ordina per</span>
          <select id="sortMode">
            <option value="featured">In evidenza (default)</option>
            <option value="newest">Più recenti</option>
            <option value="title">Titolo (A-Z)</option>
            <option value="priceAsc">Prezzo (crescente)</option>
            <option value="priceDesc">Prezzo (decrescente)</option>
          </select>
        </label>

        <button id="btnApplySort" class="btn primary">Applica ordinamento</button>

        <hr style="margin:14px 0; opacity:.2;" />
        <div class="section-title">Aggiungi nuovo progetto</div>

        <label class="field">
          <span>Titolo</span>
          <input id="newTitle" type="text" placeholder="Es. Acchiappasogni - Modello 123" />
        </label>

        <label class="field">
          <span>Categoria</span>
          <input id="newCategory" type="text" placeholder="Es. Acchiappasogni Classici" />
        </label>

        <label class="field">
          <span>Prezzo (€)</span>
          <input id="newPrice" type="number" step="0.01" placeholder="Es. 5" />
        </label>

        <label class="field">
          <span>Descrizione</span>
          <textarea id="newDesc" rows="3" placeholder="Descrizione..."></textarea>
        </label>

        <label class="field">
          <span>Immagine (path)</span>
          <input id="newImage" type="text" placeholder="./assets/assets/images/.../FB_IMG_....jpg" />
        </label>

        <label style="display:flex; gap:8px; align-items:center; margin:10px 0;">
          <input id="newFeatured" type="checkbox" />
          <span>In evidenza</span>
        </label>

        <button id="btnAddProduct" class="btn primary">Aggiungi progetto</button>

        <hr style="margin:14px 0; opacity:.2;" />
        <div class="section-title">Modifica / Duplica / Elimina</div>
        <div id="adminList"></div>

        <div style="display:flex; gap:8px; margin-top:12px;">
          <button id="btnSaveAll" class="btn primary" style="flex:1;">Salva modifiche</button>
          <button id="btnResetAll" class="btn danger" style="flex:1;">Ripristina default</button>
        </div>

        <p class="small" style="margin-top:10px;">
          Tutto viene salvato nell’app. “Ripristina default” torna ai prodotti del products.json.
        </p>
      </div>
    </div>
  </aside>

  <script src="app.js"></script>

  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./service-worker.js");
    }
  </script>
</body>
</html>
